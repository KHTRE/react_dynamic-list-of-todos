(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{18:function(e,t,r){},19:function(e,t,r){},20:function(e,t,r){},22:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var s=r(12),n=r.n(s),c=r(4),a=r(3),o=r(11),i=r(5),l=r(6),d=r(8),u=r(7),h=r(2),j=r.n(h),p=r(1),b=r.n(p),m=(r(18),r(19),r(20),r(10)),f=r.n(m),v=r(0),O=function(e){var t=e.todos,r=e.selectedUserId,s=e.handleUserSelect,n=e.changeTodoStatus,c=e.handleSearch,a=e.handleFilter,o=e.handleUserError,i=function(e){o("");var t=e.currentTarget.dataset.id;t&&s(+t)},l=function(e){n(e.target.id)};return Object(v.jsxs)("div",{className:"TodoList",children:[Object(v.jsx)("h2",{children:"Todos:"}),Object(v.jsxs)("label",{htmlFor:"searchInput",children:["Filter todos by title:",Object(v.jsx)("input",{type:"text",id:"searchInput",placeholder:"Input title",onChange:function(e){var t=e.target.value;c(t)}})]}),Object(v.jsxs)("select",{id:"selectTodos",placeholder:"Input title",onChange:function(e){var t=e.target.value;a(t)},children:[Object(v.jsx)("option",{value:"All",children:"Show all"}),Object(v.jsx)("option",{value:"Active",children:"Show active"}),Object(v.jsx)("option",{value:"Completed",children:"Show completed"})]}),Object(v.jsx)("div",{className:"TodoList__list-container",children:t.map((function(e){return Object(v.jsxs)("li",{className:f()("TodoList__item",{"TodoList__item--unchecked":!e.completed,"TodoList__item--checked":e.completed}),children:[Object(v.jsxs)("label",{htmlFor:e.title,children:[Object(v.jsx)("input",{type:"checkbox",checked:e.completed,onChange:l,id:e.title}),Object(v.jsx)("p",{children:e.title})]}),Object(v.jsxs)("button",{onClick:i,className:f()("TodoList__user-button","button",{"TodoList__user-button--selected":r===e.userId}),type:"button","data-id":e.userId,children:["User\xa0#",e.userId]})]},e.id)}))})]})},U=(r(22),function(){return fetch("https://mate.academy/students-api/todos").then((function(e){return e.json()}))}),x=function(e){return fetch("https://mate.academy/students-api/users/"+e).then((function(e){return e.json()}))},_=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var s=arguments.length,n=new Array(s),o=0;o<s;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))).state={user:{id:0,createdAt:"",updatedAt:"",name:"",username:"",email:"",phone:"",website:""}},e.clearHandler=function(){e.props.clearUser()},e.loadUsers=function(){e.setState({user:{id:0,createdAt:"",updatedAt:"",name:"",username:"",email:"",phone:"",website:""}}),e.getUserFromServer()},e.getUserFromServer=Object(c.a)(j.a.mark((function t(){var r,s,n;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=!1,t.prev=1,t.next=4,x(e.props.selectedUserId);case 4:r=t.sent,t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),s=!0,n="An error has ocurred while getting data from server: ".concat(String(t.t0)),e.props.handleUserError(n);case 12:s||e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{user:r})}));case 13:case"end":return t.stop()}}),t,null,[[1,7]])}))),e.userLoader=function(){var t=e.state.user,r=t.id,s=t.name,n=t.email,c=t.phone;return 0===e.state.user.id?Object(v.jsx)("div",{className:"CurrentUser",children:Object(v.jsx)("h2",{className:"CurrentUser__title",children:Object(v.jsx)("span",{children:"The data is loading"})})}):Object(v.jsxs)("div",{className:"CurrentUser",children:[Object(v.jsx)("h2",{className:"CurrentUser__title",children:Object(v.jsxs)("span",{children:["Selected user:"," ",r]})}),Object(v.jsx)("h3",{className:"CurrentUser__name",children:s}),Object(v.jsx)("p",{className:"CurrentUser__email",children:n}),Object(v.jsx)("p",{className:"CurrentUser__phone",children:c}),Object(v.jsx)("button",{className:"CurrentUser__clear",type:"button",onClick:e.clearHandler,children:"Clear"})]})},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getUserFromServer()}},{key:"componentDidUpdate",value:function(e){this.props.selectedUserId!==e.selectedUserId&&this.loadUsers()}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.userLoader()})}}]),r}(b.a.Component),S=_,g=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var s=arguments.length,n=new Array(s),l=0;l<s;l++)n[l]=arguments[l];return(e=t.call.apply(t,[this].concat(n))).state={selectedUserId:0,todos:[],filterParameter:"All",searchTitle:"",userError:""},e.handleUserError=function(t){e.setState({userError:t})},e.handleSearch=function(t){e.setState({searchTitle:t})},e.handleFilter=function(t){e.setState({filterParameter:t})},e.handleUserSelect=function(t){e.setState({selectedUserId:t})},e.clearUser=function(){e.setState({selectedUserId:0})},e.getFilteredTodos=function(){var t,r=e.state,s=r.filterParameter,n=r.searchTitle,c=Object(o.a)(e.state.todos);switch(s){case"Active":t=c.filter((function(e){return!0!==e.completed}));break;case"Completed":t=c.filter((function(e){return!0===e.completed}));break;default:t=c}return t=t.filter((function(e){return e.title.includes(n)}))},e.changeTodoStatus=function(t){var r=Object(o.a)(e.state.todos),s=r.findIndex((function(e){return e.title===t}));r[s].completed=!r[s].completed,e.setState((function(e){return Object(a.a)(Object(a.a)({},e),{},{todos:r})}))},e.getUserMessage=function(){return""!==e.state.userError?Object(v.jsx)("div",{className:"App__content-container",children:e.state.userError}):Object(v.jsx)("div",{className:"App__content-container",children:e.state.selectedUserId?Object(v.jsx)(S,{selectedUserId:e.state.selectedUserId,clearUser:e.clearUser,handleUserError:e.handleUserError}):"No user selected"})},e.getTodosFromServer=Object(c.a)(j.a.mark((function t(){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:r=t.sent,e.setState({todos:r});case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getTodosFromServer()}},{key:"render",value:function(){var e=this.state.selectedUserId;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("div",{className:"App__sidebar",children:Object(v.jsx)(O,{todos:this.getFilteredTodos(),selectedUserId:e,handleUserSelect:this.handleUserSelect,changeTodoStatus:this.changeTodoStatus,handleSearch:this.handleSearch,handleFilter:this.handleFilter,handleUserError:this.handleUserError})}),Object(v.jsx)("div",{className:"App__content",children:this.getUserMessage()})]})}}]),r}(b.a.Component),T=g;n.a.render(Object(v.jsx)(T,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.898ef00d.chunk.js.map
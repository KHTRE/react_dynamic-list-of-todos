(this["webpackJsonpreact_dynamic-list-of-todos"]=this["webpackJsonpreact_dynamic-list-of-todos"]||[]).push([[0],{18:function(e,t,r){},19:function(e,t,r){},20:function(e,t,r){},22:function(e,t,r){},23:function(e,t,r){"use strict";r.r(t);var n=r(12),s=r.n(n),a=r(4),c=r(3),o=r(7),i=r(5),l=r(6),d=r(9),u=r(8),h=r(2),p=r.n(h),j=r(1),m=r.n(j),b=(r(18),r(19),r(20),r(11)),f=r.n(b),v=r(0),O=function(e){var t=e.todos,r=e.selectedUserId,n=e.handleUserSelect,s=e.changeTodoStatus,a=e.handleSearch,c=e.handleFilter,o=e.handleUserError,i=function(e){o("");var t=e.currentTarget.dataset.id;t&&n(+t)},l=function(e){s(e.target.id)};return Object(v.jsxs)("div",{className:"TodoList",children:[Object(v.jsx)("h2",{children:"Todos:"}),Object(v.jsxs)("label",{htmlFor:"searchInput",children:["Filter todos by title:",Object(v.jsx)("input",{type:"text",id:"searchInput",placeholder:"Input title",onChange:function(e){var t=e.target.value;a(t)}})]}),Object(v.jsxs)("select",{id:"selectTodos",placeholder:"Input title",onChange:function(e){var t=e.target.value;c(t)},children:[Object(v.jsx)("option",{value:"All",children:"Show all"}),Object(v.jsx)("option",{value:"Active",children:"Show active"}),Object(v.jsx)("option",{value:"Completed",children:"Show completed"})]}),Object(v.jsx)("div",{className:"TodoList__list-container",children:t.map((function(e){return Object(v.jsxs)("li",{className:f()("TodoList__item",{"TodoList__item--unchecked":!e.completed,"TodoList__item--checked":e.completed}),children:[Object(v.jsxs)("label",{htmlFor:e.title,children:[Object(v.jsx)("input",{type:"checkbox",checked:e.completed,onChange:l,id:e.title}),Object(v.jsx)("p",{children:e.title})]}),Object(v.jsxs)("button",{onClick:i,className:f()("TodoList__user-button","button",{"TodoList__user-button--selected":r===e.userId}),type:"button","data-id":e.userId,children:["User\xa0#",e.userId]})]},e.id)}))})]})},U=(r(22),function(){return fetch("https://mate.academy/students-api/todos").then((function(e){return e.json()}))}),x=function(e){return fetch("https://mate.academy/students-api/users/"+e).then((function(e){return e.json()}))},_=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={user:{id:0,createdAt:"",updatedAt:"",name:"",username:"",email:"",phone:"",website:""}},e.clearHandler=function(){e.props.clearUser()},e.loadUsers=function(){e.setState({user:{id:0,createdAt:"",updatedAt:"",name:"",username:"",email:"",phone:"",website:""}}),e.getUserFromServer()},e.getUserFromServer=Object(a.a)(p.a.mark((function t(){var r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!1,t.prev=1,t.next=4,x(e.props.selectedUserId);case 4:r=t.sent,t.next=12;break;case 7:t.prev=7,t.t0=t.catch(1),n=!0,"An error has ocurred while getting data from server, please contact our support team",e.props.handleUserError("An error has ocurred while getting data from server, please contact our support team");case 12:n||e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{user:r})}));case 13:case"end":return t.stop()}}),t,null,[[1,7]])}))),e.userLoader=function(){var t=e.state.user,r=t.id,n=t.name,s=t.email,a=t.phone;return 0===e.state.user.id?Object(v.jsx)("div",{className:"CurrentUser",children:Object(v.jsx)("h2",{className:"CurrentUser__title",children:Object(v.jsx)("span",{children:"The data is loading"})})}):Object(v.jsxs)("div",{className:"CurrentUser",children:[Object(v.jsx)("h2",{className:"CurrentUser__title",children:Object(v.jsxs)("span",{children:["Selected user:"," ",r]})}),Object(v.jsx)("h3",{className:"CurrentUser__name",children:n}),Object(v.jsx)("p",{className:"CurrentUser__email",children:s}),Object(v.jsx)("p",{className:"CurrentUser__phone",children:a}),Object(v.jsx)("button",{className:"CurrentUser__clear",type:"button",onClick:e.clearHandler,children:"Clear"})]})},e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getUserFromServer()}},{key:"componentDidUpdate",value:function(e){this.props.selectedUserId!==e.selectedUserId&&this.loadUsers()}},{key:"render",value:function(){return Object(v.jsx)(v.Fragment,{children:this.userLoader()})}}]),r}(m.a.Component),S=_,g=function(e,t,r){var n,s=Object(o.a)(e);switch(r){case"Active":n=s.filter((function(e){return!0!==e.completed}));break;case"Completed":n=s.filter((function(e){return!0===e.completed}));break;default:n=s}return n=n.filter((function(e){return e.title.includes(t)}))},I=function(e){Object(d.a)(r,e);var t=Object(u.a)(r);function r(){var e;Object(i.a)(this,r);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=t.call.apply(t,[this].concat(s))).state={selectedUserId:0,todos:[],filterParameter:"All",searchTitle:"",userError:""},e.handleUserError=function(t){e.setState({userError:t})},e.handleSearch=function(t){e.setState({searchTitle:t})},e.handleFilter=function(t){e.setState({filterParameter:t})},e.handleUserSelect=function(t){e.setState({selectedUserId:t})},e.clearUser=function(){e.setState({selectedUserId:0})},e.changeTodoStatus=function(t){var r=Object(o.a)(e.state.todos),n=r.findIndex((function(e){return e.title===t}));r[n].completed=!r[n].completed,e.setState((function(e){return Object(c.a)(Object(c.a)({},e),{},{todos:r})}))},e.getUserMessage=function(){return""!==e.state.userError?Object(v.jsx)("div",{className:"App__content-container",children:e.state.userError}):Object(v.jsx)("div",{className:"App__content-container",children:e.state.selectedUserId?Object(v.jsx)(S,{selectedUserId:e.state.selectedUserId,clearUser:e.clearUser,handleUserError:e.handleUserError}):"No user selected"})},e.getTodosFromServer=Object(a.a)(p.a.mark((function t(){var r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,U();case 2:r=t.sent,e.setState({todos:r});case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(r,[{key:"componentDidMount",value:function(){this.getTodosFromServer()}},{key:"render",value:function(){var e=this.state,t=e.selectedUserId,r=e.todos,n=e.searchTitle,s=e.filterParameter;return Object(v.jsxs)("div",{className:"App",children:[Object(v.jsx)("div",{className:"App__sidebar",children:Object(v.jsx)(O,{todos:g(r,n,s),selectedUserId:t,handleUserSelect:this.handleUserSelect,changeTodoStatus:this.changeTodoStatus,handleSearch:this.handleSearch,handleFilter:this.handleFilter,handleUserError:this.handleUserError})}),Object(v.jsx)("div",{className:"App__content",children:this.getUserMessage()})]})}}]),r}(m.a.Component),T=I;s.a.render(Object(v.jsx)(T,{}),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.0a27cfd8.chunk.js.map